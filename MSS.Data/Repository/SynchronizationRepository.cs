// Decompiled with JetBrains decompiler
// Type: MSS.Data.Repository.SynchronizationRepository
// Assembly: MSS.Data, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: 25FA456E-0753-42F8-8F73-BE22E5B867CF
// Assembly location: F:\tekst\DoingTomorrow\Zenner_Software\program_filer\MSS.Data.dll

using MSS.Interfaces;
using NHibernate;

#nullable disable
namespace MSS.Data.Repository
{
  internal class SynchronizationRepository : ISynchronizationRepository
  {
    private ISession _session;
    private const string MSSQLQuery = "delete from scope_config;\r\n                                        delete from scope_info";
    private const string SQLiteQuery = "delete from ScopeInfoTable;";
    private const string CommonQuery = "\r\n                                        delete from t_Channel_tracking;\r\n                                        delete from t_CelestaReadingDeviceTypes_tracking;\r\n                                        delete from t_COMServer_tracking;\r\n                                        delete from t_ConnectedDeviceType_tracking;\r\n                                        delete from t_Country_tracking;\r\n                                        delete from t_Filters_tracking;\r\n                                        delete from t_JobDefinitions_tracking;\r\n                                        delete from t_Location_tracking;\r\n                                        delete from t_MDMConfigs_tracking;\r\n                                        delete from t_MeasureUnit_tracking;\r\n                                        delete from t_MinomatMeters_tracking;\r\n                                        delete from t_MeterMbusRadio_tracking;\r\n                                        delete from t_MeterRadioDetails_tracking;\r\n                                        delete from t_MeterReplacementHistory_tracking;\r\n                                        delete from t_Meter_tracking;\r\n                                        delete from t_MinomatRadioDetails_tracking;                                        \r\n                                        delete from t_Minomat_tracking;\r\n                                        delete from t_OrderUser_tracking;\r\n                                        delete from t_OrderMessages_tracking;\r\n                                        delete from t_OrderReadingValues_tracking;\r\n                                        delete from t_Order_tracking;\r\n                                        delete from t_Provider_tracking;\r\n                                        delete from t_RoleOperation_tracking;\r\n                                        delete from t_Role_tracking;\r\n                                        delete from t_Operation_tracking;\r\n                                        delete from t_RoomType_tracking;\r\n                                        delete from t_Rules_tracking;\r\n                                        delete from t_Scenario_tracking;\r\n                                        delete from t_Note_tracking;\r\n                                        delete from t_NoteType_tracking;\r\n                                        delete from t_ScenarioJobDefinitions_tracking;\r\n                                        delete from t_StructureNodeEquipmentSettings_tracking;\r\n                                        delete from t_StructureNodeLinks_tracking;\r\n                                        delete from t_StructureNodeType_tracking;\r\n                                        delete from t_StructureNode_tracking;\r\n                                        delete from t_Tenant_tracking;\r\n                                        delete from t_UserDeviceTypeSettings_tracking;\r\n                                        delete from t_UserRole_tracking;\r\n                                        delete from t_User_tracking;\r\n                                        delete from t_ReadingValues_tracking";
    private const string CommonQueryPartialSync = "\r\n                                        delete from t_Channel_tracking;\r\n                                        delete from t_CelestaReadingDeviceTypes_tracking;\r\n                                        delete from t_COMServer_tracking;\r\n                                        delete from t_ConnectedDeviceType_tracking;\r\n                                        delete from t_Country_tracking;\r\n                                        delete from t_Filters_tracking;\r\n                                        delete from t_JobDefinitions_tracking;                                        \r\n                                        delete from t_MDMConfigs_tracking;\r\n                                        delete from t_MeasureUnit_tracking;\r\n                                        delete from t_OrderUser_tracking;\r\n                                        delete from t_Provider_tracking;\r\n                                        delete from t_RoleOperation_tracking;\r\n                                        delete from t_Role_tracking;\r\n                                        delete from t_Operation_tracking;\r\n                                        delete from t_RoomType_tracking;\r\n                                        delete from t_Rules_tracking;\r\n                                        delete from t_Scenario_tracking;\r\n                                        delete from t_NoteType_tracking;\r\n                                        delete from t_ScenarioJobDefinitions_tracking;                                                                                \r\n                                        delete from t_StructureNodeType_tracking;\r\n                                        delete from t_UserDeviceTypeSettings_tracking;\r\n                                        delete from t_UserRole_tracking;\r\n                                        delete from t_User_tracking;\r\n                                        delete from t_ReadingValues_tracking";

    public SynchronizationRepository(ISession session) => this._session = session;

    public void CleanMSSQLSyncTables()
    {
      this._session.CreateSQLQuery("delete from scope_config;\r\n                                        delete from scope_info \r\n                                        delete from t_Channel_tracking;\r\n                                        delete from t_CelestaReadingDeviceTypes_tracking;\r\n                                        delete from t_COMServer_tracking;\r\n                                        delete from t_ConnectedDeviceType_tracking;\r\n                                        delete from t_Country_tracking;\r\n                                        delete from t_Filters_tracking;\r\n                                        delete from t_JobDefinitions_tracking;\r\n                                        delete from t_Location_tracking;\r\n                                        delete from t_MDMConfigs_tracking;\r\n                                        delete from t_MeasureUnit_tracking;\r\n                                        delete from t_MinomatMeters_tracking;\r\n                                        delete from t_MeterMbusRadio_tracking;\r\n                                        delete from t_MeterRadioDetails_tracking;\r\n                                        delete from t_MeterReplacementHistory_tracking;\r\n                                        delete from t_Meter_tracking;\r\n                                        delete from t_MinomatRadioDetails_tracking;                                        \r\n                                        delete from t_Minomat_tracking;\r\n                                        delete from t_OrderUser_tracking;\r\n                                        delete from t_OrderMessages_tracking;\r\n                                        delete from t_OrderReadingValues_tracking;\r\n                                        delete from t_Order_tracking;\r\n                                        delete from t_Provider_tracking;\r\n                                        delete from t_RoleOperation_tracking;\r\n                                        delete from t_Role_tracking;\r\n                                        delete from t_Operation_tracking;\r\n                                        delete from t_RoomType_tracking;\r\n                                        delete from t_Rules_tracking;\r\n                                        delete from t_Scenario_tracking;\r\n                                        delete from t_Note_tracking;\r\n                                        delete from t_NoteType_tracking;\r\n                                        delete from t_ScenarioJobDefinitions_tracking;\r\n                                        delete from t_StructureNodeEquipmentSettings_tracking;\r\n                                        delete from t_StructureNodeLinks_tracking;\r\n                                        delete from t_StructureNodeType_tracking;\r\n                                        delete from t_StructureNode_tracking;\r\n                                        delete from t_Tenant_tracking;\r\n                                        delete from t_UserDeviceTypeSettings_tracking;\r\n                                        delete from t_UserRole_tracking;\r\n                                        delete from t_User_tracking;\r\n                                        delete from t_ReadingValues_tracking").ExecuteUpdate();
    }

    public void CleanSQLiteSyncTables(bool isPartialSync = false)
    {
      if (isPartialSync)
        this._session.CreateSQLQuery("delete from ScopeInfoTable; \r\n                                        delete from t_Channel_tracking;\r\n                                        delete from t_CelestaReadingDeviceTypes_tracking;\r\n                                        delete from t_COMServer_tracking;\r\n                                        delete from t_ConnectedDeviceType_tracking;\r\n                                        delete from t_Country_tracking;\r\n                                        delete from t_Filters_tracking;\r\n                                        delete from t_JobDefinitions_tracking;                                        \r\n                                        delete from t_MDMConfigs_tracking;\r\n                                        delete from t_MeasureUnit_tracking;\r\n                                        delete from t_OrderUser_tracking;\r\n                                        delete from t_Provider_tracking;\r\n                                        delete from t_RoleOperation_tracking;\r\n                                        delete from t_Role_tracking;\r\n                                        delete from t_Operation_tracking;\r\n                                        delete from t_RoomType_tracking;\r\n                                        delete from t_Rules_tracking;\r\n                                        delete from t_Scenario_tracking;\r\n                                        delete from t_NoteType_tracking;\r\n                                        delete from t_ScenarioJobDefinitions_tracking;                                                                                \r\n                                        delete from t_StructureNodeType_tracking;\r\n                                        delete from t_UserDeviceTypeSettings_tracking;\r\n                                        delete from t_UserRole_tracking;\r\n                                        delete from t_User_tracking;\r\n                                        delete from t_ReadingValues_tracking").ExecuteUpdate();
      else
        this._session.CreateSQLQuery("delete from ScopeInfoTable; \r\n                                        delete from t_Channel_tracking;\r\n                                        delete from t_CelestaReadingDeviceTypes_tracking;\r\n                                        delete from t_COMServer_tracking;\r\n                                        delete from t_ConnectedDeviceType_tracking;\r\n                                        delete from t_Country_tracking;\r\n                                        delete from t_Filters_tracking;\r\n                                        delete from t_JobDefinitions_tracking;\r\n                                        delete from t_Location_tracking;\r\n                                        delete from t_MDMConfigs_tracking;\r\n                                        delete from t_MeasureUnit_tracking;\r\n                                        delete from t_MinomatMeters_tracking;\r\n                                        delete from t_MeterMbusRadio_tracking;\r\n                                        delete from t_MeterRadioDetails_tracking;\r\n                                        delete from t_MeterReplacementHistory_tracking;\r\n                                        delete from t_Meter_tracking;\r\n                                        delete from t_MinomatRadioDetails_tracking;                                        \r\n                                        delete from t_Minomat_tracking;\r\n                                        delete from t_OrderUser_tracking;\r\n                                        delete from t_OrderMessages_tracking;\r\n                                        delete from t_OrderReadingValues_tracking;\r\n                                        delete from t_Order_tracking;\r\n                                        delete from t_Provider_tracking;\r\n                                        delete from t_RoleOperation_tracking;\r\n                                        delete from t_Role_tracking;\r\n                                        delete from t_Operation_tracking;\r\n                                        delete from t_RoomType_tracking;\r\n                                        delete from t_Rules_tracking;\r\n                                        delete from t_Scenario_tracking;\r\n                                        delete from t_Note_tracking;\r\n                                        delete from t_NoteType_tracking;\r\n                                        delete from t_ScenarioJobDefinitions_tracking;\r\n                                        delete from t_StructureNodeEquipmentSettings_tracking;\r\n                                        delete from t_StructureNodeLinks_tracking;\r\n                                        delete from t_StructureNodeType_tracking;\r\n                                        delete from t_StructureNode_tracking;\r\n                                        delete from t_Tenant_tracking;\r\n                                        delete from t_UserDeviceTypeSettings_tracking;\r\n                                        delete from t_UserRole_tracking;\r\n                                        delete from t_User_tracking;\r\n                                        delete from t_ReadingValues_tracking").ExecuteUpdate();
    }
  }
}
